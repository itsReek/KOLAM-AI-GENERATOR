<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kolam AI Generator</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* ================= BODY ================= */
      body {
        font-family: "Roboto", sans-serif;
        margin: 0;
        padding: 0;
        color: #ffffff;
        overflow-x: hidden;
        background: linear-gradient(120deg, #0f0c29, #302b63, #24243e);
        background-size: 600% 600%;
        animation: backgroundShift 20s ease infinite;
        position: relative;
        display: flex;
      }

      @keyframes backgroundShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("https://cdn0.weddingwire.in/article/9461/original/960/jpg/41649-pulli-kolam-images-shanthisridharan-weddings.jpeg")
          no-repeat center center fixed;
        background-size: cover;
        opacity: 0.05;
        pointer-events: none;
      }

      /* ================= SIDEBAR ================= */
      .sidebar {
        width: 220px;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(10px);
        border-right: 2px solid #ff4b2b;
        height: 100vh;
        padding: 20px;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
      }
      .sidebar h2 {
        color: #ff4b2b;
        margin-bottom: 20px;
      }
      .sidebar a {
        display: block;
        color: #fff;
        text-decoration: none;
        padding: 12px;
        border-radius: 10px;
        transition: all 0.3s ease;
      }
      .sidebar a:hover {
        background: #ff4b2b;
      }

      /* ================= MAIN ================= */
      .main {
        margin-left: 240px;
        flex: 1;
      }

      /* ================= MOUSE TRAIL ================= */
      .trail {
        position: fixed;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        pointer-events: none;
        background: #ff4b2b;
        opacity: 0.8;
        mix-blend-mode: screen;
        transform: translate(-50%, -50%);
        transition: transform 0.1s linear, opacity 0.5s linear;
      }

      /* ================= HEADER ================= */
      header {
        background: #1a1a2e;
        padding: 30px 20px 60px;
        border-bottom: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 0 0 40px 40px;
        text-align: center;
        position: relative;
      }

      header h1 {
        font-size: 2.8rem;
        margin-bottom: 10px;
        color: #ff4b2b;
      }

      header p {
        font-size: 1.2rem;
        color: #f0f0f0;
      }

      #kolamHeaderCanvas {
        display: block;
        margin: 20px auto 0;
        background: transparent;
      }

      /* ================= SECTIONS ================= */
      section {
        margin: 50px auto;
        max-width: 800px;
        opacity: 0;
        animation: fadeIn 1.5s ease forwards;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      section:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(255, 75, 43, 0.3);
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }

      .upload-box {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        padding: 35px;
        border: 2px solid rgba(255, 255, 255, 0.2);
        margin-bottom: 40px;
        transition: all 0.3s ease;
      }

      h2 {
        font-size: 1.9rem;
        margin-bottom: 20px;
        color: #ff4b2b;
      }

      input[type="file"] {
        margin-top: 15px;
        padding: 12px;
        border: 2px dashed rgba(255, 255, 255, 0.3);
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.05);
        cursor: pointer;
        color: #fff;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      input[type="file"]:hover,
      input[type="file"]:focus {
        background: rgba(255, 255, 255, 0.15);
        border-color: #ff4b2b;
      }

      canvas,
      img {
        max-width: 100%;
        margin-top: 20px;
        border-radius: 15px;
        border: 2px solid rgba(255, 75, 43, 0.7);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      canvas:hover,
      img:hover {
        transform: scale(1.03);
        box-shadow: 0 10px 25px rgba(255, 75, 43, 0.4);
      }

      button {
        padding: 14px 40px;
        background: #ff4b2b;
        color: #fff;
        font-size: 16px;
        font-weight: 600;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        margin-top: 15px;
        transition: all 0.3s ease;
      }

      button:hover {
        background: #ff652b;
        transform: scale(1.05);
        box-shadow: 0 5px 20px rgba(255, 75, 43, 0.5);
      }

      footer {
        margin-top: 40px;
        padding: 25px;
        background: rgba(0, 0, 0, 0.85);
        color: #f0f0f0;
        font-size: 14px;
        border-top: 2px solid #ff4b2b;
        text-align: center;
      }

      footer p {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>Kolam Menu</h2>
      <a href="#upload">Upload Kolam</a>
      <a href="#recreate">Recreation</a>
      <a href="#generate">Generate</a>
    </div>

    <!-- Main -->
    <div class="main">
      <header>
        <h1>Kolam AI Generator</h1>
        <p>Preserving Tradition with Machine Learning ⚡</p>
        <canvas id="kolamHeaderCanvas" width="300" height="300"></canvas>
      </header>

      <section id="upload" class="upload-box">
        <h2>Upload a Kolam</h2>
        <input type="file" id="fileInput" accept="image/*" />
        <button onclick="analyzeKolam()">Analyze Kolam</button>
        <div id="analysisResult"></div>
      </section>

      <section id="recreate" class="upload-box">
        <h2>Step-by-Step Recreation</h2>
        <button onclick="recreateKolam()">Recreate</button>
        <div id="recreationCanvas"></div>
      </section>

      <section id="generate" class="upload-box">
        <h2>Generate New Kolam Variations</h2>
        <button onclick="generateKolam()">Generate</button>
        <div id="generatedKolam"></div>
      </section>

      <footer>
        <p>© 2025 Kolam AI Project | Designed with ✨ Neon Professional UI</p>
      </footer>
    </div>

    <script>
      /* ================= MOUSE TRAIL ================= */
      const trailCount = 20;
      const trails = [];
      for (let i = 0; i < trailCount; i++) {
        const div = document.createElement("div");
        div.className = "trail";
        document.body.appendChild(div);
        trails.push({ el: div, x: 0, y: 0 });
      }

      let mouseX = 0,
        mouseY = 0;
      document.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      function animateTrail() {
        let x = mouseX,
          y = mouseY;
        trails.forEach((trail, index) => {
          trail.x += (x - trail.x) * 0.3;
          trail.y += (y - trail.y) * 0.3;
          trail.el.style.transform = `translate(${trail.x}px, ${trail.y}px)`;
          trail.el.style.opacity = (trailCount - index) / trailCount;
          x = trail.x;
          y = trail.y;
        });
        requestAnimationFrame(animateTrail);
      }
      animateTrail();

      /* ================= HEADER PONGAL KOLAM ANIMATION ================= */
      const kolamCanvas = document.getElementById("kolamHeaderCanvas");
      const kctx = kolamCanvas.getContext("2d");

      function drawPongalKolam(t) {
        kctx.clearRect(0, 0, kolamCanvas.width, kolamCanvas.height);
        kctx.strokeStyle = "#ff4b2b";
        kctx.lineWidth = 2;

        const cx = 150,
          cy = 150;
        const radius = 60;

        // Four symmetric lotus-like patterns
        for (let j = 0; j < 4; j++) {
          kctx.beginPath();
          for (let i = 0; i <= 360; i += 30) {
            const angle = ((i + t * 30) * Math.PI) / 180;
            const r = radius + Math.sin((i + t) / 10) * 20;
            const x = cx + Math.cos(angle + j * (Math.PI / 2)) * r;
            const y = cy + Math.sin(angle + j * (Math.PI / 2)) * r;
            if (i === 0) kctx.moveTo(x, y);
            else kctx.lineTo(x, y);
          }
          kctx.closePath();
          kctx.stroke();
        }

        requestAnimationFrame(() => drawPongalKolam(t + 1));
      }
      drawPongalKolam(0);

      /* ================= ANALYZE ================= */
      function analyzeKolam() {
        const fileInput = document.getElementById("fileInput");
        if (!fileInput.files[0]) {
          alert("Please select an image first!");
          return;
        }

        const reader = new FileReader();
        reader.onload = function (e) {
          const img = new Image();
          img.src = e.target.result;

          img.onload = function () {
            const canvas = document.createElement("canvas");
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0);

            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            let dotCount = 0;

            for (let i = 0; i < data.length; i += 4) {
              const r = data[i],
                g = data[i + 1],
                b = data[i + 2];
              const brightness = 0.299 * r + 0.587 * g + 0.114 * b;
              if (brightness > 200) dotCount++;
            }
            dotCount = Math.floor(dotCount / 50);

            document.getElementById("analysisResult").innerHTML = `
              <p><b>Symmetry:</b> Radial (approx.)</p>
              <p><b>Dots detected:</b> ${dotCount}</p>
              <img src="${e.target.result}" alt="Uploaded Kolam" style="max-width: 300px; margin-top: 15px;">
            `;
          };
        };
        reader.readAsDataURL(fileInput.files[0]);
      }

      /* ================= RECREATE ================= */
      function recreateKolam() {
        const container = document.getElementById("recreationCanvas");
        container.innerHTML = "";
        const canvas = document.createElement("canvas");
        canvas.width = 400;
        canvas.height = 400;
        container.appendChild(canvas);
        const ctx = canvas.getContext("2d");

        ctx.strokeStyle = "#ff4b2b";
        ctx.lineWidth = 2;

        let step = 0;
        function drawStep() {
          if (step < 6) {
            ctx.beginPath();
            ctx.arc(200, 200, 40 + step * 25, 0, Math.PI * 2);
            ctx.stroke();
            step++;
            setTimeout(drawStep, 500);
          } else if (step < 18) {
            const i = step - 6;
            const angle = (i * Math.PI * 2) / 12;
            const x = 200 + Math.cos(angle) * 140;
            const y = 200 + Math.sin(angle) * 140;
            ctx.beginPath();
            ctx.arc(x, y, 10, 0, Math.PI * 2);
            ctx.fillStyle = "#ff4b2b";
            ctx.fill();
            step++;
            setTimeout(drawStep, 400);
          }
        }
        drawStep();
      }

      /* ================= GENERATE ================= */
      function generateKolam() {
        const container = document.getElementById("generatedKolam");
        container.innerHTML = "";
        const canvas = document.createElement("canvas");
        canvas.width = 400;
        canvas.height = 400;
        container.appendChild(canvas);
        const ctx = canvas.getContext("2d");

        ctx.strokeStyle = "#ff4b2b";
        ctx.lineWidth = 2;

        for (let i = 0; i < 5 + Math.random() * 5; i++) {
          ctx.beginPath();
          ctx.arc(200, 200, 40 + i * (20 + Math.random() * 10), 0, Math.PI * 2);
          ctx.stroke();
        }

        const dots = 8 + Math.floor(Math.random() * 8);
        for (let i = 0; i < dots; i++) {
          const angle = (i * Math.PI * 2) / dots;
          const radius = 80 + Math.random() * 100;
          const x = 200 + Math.cos(angle) * radius;
          const y = 200 + Math.sin(angle) * radius;
          ctx.beginPath();
          ctx.arc(x, y, 8, 0, Math.PI * 2);
          ctx.fillStyle = "#ff4b2b";
          ctx.fill();
        }
      }
    </script>
  </body>
</html>
