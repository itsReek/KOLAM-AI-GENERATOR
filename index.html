<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PATTERNOVA</title>
    <!-- Google Fonts with fallback -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* ================= COMMON ================= */
      body {
        font-family: "Roboto", Arial, Helvetica, sans-serif;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        display: flex;
        background: #111;
        color: #fff;
        transition: background 0.5s ease, color 0.5s ease;
      }

      /* DARK MODE */
      body.dark {
        background: linear-gradient(120deg, #0f0c29, #302b63, #24243e);
        background-size: 600% 600%;
        animation: backgroundShift 20s ease infinite;
      }

      /* LIGHT MODE */
      body.light {
        color: #222;
        background: linear-gradient(120deg, #fdfbfb, #f6f9fc, #ffffff);
        background-size: 600% 600%;
        animation: backgroundShiftLight 20s ease infinite;
      }

      @keyframes backgroundShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
      @keyframes backgroundShiftLight {
        0% {
          background-position: 50% 0%;
        }
        50% {
          background-position: 50% 100%;
        }
        100% {
          background-position: 50% 0%;
        }
      }

      /* ================= OVERLAY ================= */
      body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("https://cdn0.weddingwire.in/article/9461/original/960/jpg/41649-pulli-kolam-images-shanthisridharan-weddings.jpeg")
          no-repeat center center fixed;
        background-size: cover;
        opacity: 0.05;
        pointer-events: none;
      }

      /* ================= SIDEBAR ================= */
      .sidebar {
        width: 220px;
        background: rgba(0, 0, 0, 0.95);
        border-right: 2px solid #ff4b2b;
        height: 100vh;
        padding: 20px;
        position: fixed;
        top: 0;
        left: -240px; /* hidden by default */
        z-index: 1000;
        transition: left 0.3s ease;
      }
      .sidebar.active {
        left: 0;
      }
      body.light .sidebar {
        background: #ffffff;
        border-right: 2px solid #ff6f61;
      }
      .sidebar h2 {
        color: #ff4b2b;
        margin-bottom: 20px;
        margin-top: 80px; /* ‚úÖ More space below hamburger */
      }
      body.light .sidebar h2 {
        color: #ff6f61;
      }
      .sidebar a {
        display: block;
        color: #fff;
        text-decoration: none;
        padding: 12px;
        border-radius: 10px;
        transition: all 0.3s ease;
      }
      body.light .sidebar a {
        color: #444;
        font-weight: 600;
      }
      .sidebar a:hover {
        background: #ff4b2b;
        color: #fff !important;
      }

      /* Sidebar toggle button */
      .menu-toggle {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1100;
        font-size: 24px;
        background: #ff4b2b;
        color: #fff;
        padding: 10px 15px;
        border-radius: 8px;
        cursor: pointer;
        border: none;
      }
      body.light .menu-toggle {
        background: #444;
      }

      /* ================= MAIN ================= */
      .main {
        margin-left: 0;
        flex: 1;
        transition: margin-left 0.3s ease;
        width: 100%;
      }
      .sidebar.active ~ .main {
        margin-left: 240px;
      }

      /* ================= HEADER ================= */
      header {
        background: #1a1a2e;
        padding: 30px 20px 60px;
        border-bottom: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 0 0 40px 40px;
        text-align: center;
        position: relative;
      }
      body.light header {
        background: #ffecec;
      }
      header h1 {
        font-size: 2.8rem;
        margin-bottom: 10px;
        color: #ff4b2b;
      }
      body.light header h1 {
        color: #ff6f61;
      }

      #kolamHeaderCanvas {
        display: block;
        margin: 20px auto 0;
        background: transparent;
      }

      /* TOGGLE BUTTON */
      .toggle-mode {
        position: absolute;
        top: 20px;
        right: 20px;
        padding: 10px 20px;
        background: #ff4b2b;
        border: none;
        color: #fff;
        font-weight: 600;
        border-radius: 10px;
        cursor: pointer;
      }
      body.light .toggle-mode {
        background: #444;
      }

      /* ================= SECTIONS ================= */
      section {
        margin: 50px auto;
        max-width: 800px;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 15px;
        padding: 20px;
      }
      body.light section {
        background: #fff9f5;
      }

      h2 {
        font-size: 1.9rem;
        margin-bottom: 15px;
        color: #ff4b2b;
      }
      body.light h2 {
        color: #ff6f61;
      }

      input[type="file"] {
        margin-top: 15px;
        padding: 12px;
        border: 2px dashed #ff4b2b;
        border-radius: 12px;
        background: #111;
        color: #fff;
      }

      canvas,
      img,
      video {
        max-width: 100%;
        margin-top: 20px;
        border-radius: 15px;
        border: 2px solid #ff4b2b;
      }

      button {
        padding: 14px 30px;
        background: #ff4b2b;
        color: #fff;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        margin-top: 15px;
      }
      body.light button {
        background: #ff6f61;
      }

      footer {
        text-align: center;
        padding: 20px;
        font-size: 14px;
        opacity: 0.8;
      }
    </style>
  </head>
  <body class="dark">
    <!-- Sidebar Toggle -->
    <button class="menu-toggle" id="menuToggle">‚ò∞</button>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <h2>Kolam Menu</h2>
      <a href="#upload">Upload Kolam</a>
      <a href="#dots">Dot Detection</a>
      <a href="#about">About</a>
      <a href="#services">Services</a>
      <a href="#video">Video</a>
    </div>

    <!-- Main -->
    <div class="main">
      <header>
        <h1>PATTERNOVA</h1>
        <p>Preserving Tradition with Machine Learning ‚ö°</p>
        <canvas id="kolamHeaderCanvas" width="300" height="300"></canvas>
        <button class="toggle-mode" id="toggleModeBtn">üåô Dark Mode</button>
      </header>

      <!-- Upload -->
      <section id="upload">
        <h2>Upload a Kolam</h2>
        <input type="file" id="fileInput" accept="image/*" />
        <div id="uploadedPreview"></div>
      </section>

      <!-- Dot Detection -->
      <section id="dots">
        <h2>Dot Detection</h2>
        <div id="shapeOptions" style="display: none">
          <p><b>Select Shape:</b></p>
          <label
            ><input type="radio" name="shape" value="Flower üå∏" checked />
            Flower üå∏</label
          ><br />
          <label
            ><input type="radio" name="shape" value="Diamond üíé" /> Diamond
            üíé</label
          ><br />
          <label
            ><input type="radio" name="shape" value="Spiral üåÄ" /> Spiral
            üåÄ</label
          ><br />
          <label
            ><input type="radio" name="shape" value="Heart ‚ù§Ô∏è" /> Heart
            ‚ù§Ô∏è</label
          ><br />
          <button onclick="analyzeKolam()">Analyze</button>
        </div>
        <div id="dotResult"></div>
      </section>

      <!-- About -->
      <section id="about">
        <h2>About Us</h2>
        <p>
          Kolam AI Generator is a digital initiative to preserve and modernize
          the traditional art of Kolam using Artificial Intelligence.
        </p>
        <p>
          Our mission is to bridge the gap between cultural heritage and modern
          technology by creating a platform where traditional Kolam designs can
          be reimagined, learned, and analyzed.
        </p>
        <p>
          With the help of AI, we not only showcase the beauty of Kolams but
          also make them more accessible for the younger generation to learn,
          practice, and experiment creatively.
        </p>
        <p>
          This project aims to combine tradition with innovation, keeping the
          legacy of Kolams alive in a modern, digital-first world.
        </p>
      </section>

      <!-- Services -->
      <section id="services">
        <h2>Our Services</h2>
        <p>‚ú® Upload and analyze Kolam patterns with AI detection.</p>
        <p>‚ú® Detect dots and symmetry in traditional designs.</p>
        <p>‚ú® Provide step-by-step visual analysis.</p>
        <p>‚ú® Learn and explore new Kolam patterns interactively.</p>
        <p>‚ú® Save and share your Kolam designs with the community.</p>
        <p>‚ú® Personalized learning experience with AI suggestions.</p>
        <p>‚ú® Support for multiple design styles and creativity.</p>
      </section>

      <!-- Video -->
      <section id="video">
        <h2>Watch Our Demo</h2>
        <video controls>
          <source src="your-demo-video.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      </section>

      <footer>
        <p>¬© 2025 Kolam AI Project</p>
      </footer>
    </div>

    <script>
      /* Sidebar Toggle */
      const menuToggle = document.getElementById("menuToggle");
      const sidebar = document.getElementById("sidebar");
      menuToggle.addEventListener("click", () => {
        sidebar.classList.toggle("active");
      });

      /* Header Animation */
      const kolamCanvas = document.getElementById("kolamHeaderCanvas");
      const kctx = kolamCanvas.getContext("2d");
      function drawPongalKolam(t) {
        kctx.clearRect(0, 0, kolamCanvas.width, kolamCanvas.height);
        kctx.strokeStyle = "#ff4b2b";
        kctx.lineWidth = 2;
        const cx = 150,
          cy = 150,
          radius = 60;
        for (let j = 0; j < 4; j++) {
          kctx.beginPath();
          for (let i = 0; i <= 360; i += 30) {
            const angle = ((i + t * 30) * Math.PI) / 180;
            const r = radius + Math.sin((i + t) / 10) * 20;
            const x = cx + Math.cos(angle + j * (Math.PI / 2)) * r;
            const y = cy + Math.sin(angle + j * (Math.PI / 2)) * r;
            if (i === 0) kctx.moveTo(x, y);
            else kctx.lineTo(x, y);
          }
          kctx.closePath();
          kctx.stroke();
        }
        requestAnimationFrame(() => drawPongalKolam(t + 1));
      }
      drawPongalKolam(0);

      /* Upload Preview */
      const fileInput = document.getElementById("fileInput");
      const uploadedPreview = document.getElementById("uploadedPreview");
      let uploadedImageData = null;

      fileInput.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function (e) {
          uploadedImageData = e.target.result;
          uploadedPreview.innerHTML = `<img src="${uploadedImageData}" alt="Uploaded Kolam" style="max-width: 300px;">`;
          document.getElementById("shapeOptions").style.display = "block";
        };
        reader.readAsDataURL(file);
      });

      /* Analyze Kolam */
      function analyzeKolam() {
        const dotResult = document.getElementById("dotResult");
        if (!uploadedImageData) {
          alert("Please upload a Kolam first!");
          return;
        }

        const selectedShape = document.querySelector(
          'input[name="shape"]:checked'
        ).value;
        dotResult.innerHTML = `<p style="color:#ff4b2b;">ü§ñ Analyzing for ${selectedShape}...</p>`;

        const img = new Image();
        img.src = uploadedImageData;
        img.onload = function () {
          const canvas = document.createElement("canvas");
          canvas.width = img.width;
          canvas.height = img.height;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(img, 0, 0);

          const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
          const data = imageData.data;
          let dotCount = 0;
          for (let i = 0; i < data.length; i += 4) {
            const brightness =
              0.299 * data[i] + 0.587 * data[i + 1] + 0.114 * data[i + 2];
            if (brightness > 240) dotCount++;
          }
          dotCount = Math.floor(dotCount / 100);

          dotResult.innerHTML = `
            <p><b>Dots detected:</b> ${dotCount}</p>
            <p><b>Selected Shape:</b> ${selectedShape}</p>
          `;
        };
      }

      /* Toggle Dark/Light */
      const toggleBtn = document.getElementById("toggleModeBtn");
      const body = document.body;
      if (localStorage.getItem("theme") === "light") {
        body.classList.remove("dark");
        body.classList.add("light");
        toggleBtn.textContent = "‚òÄÔ∏è Light Mode";
      }
      toggleBtn.addEventListener("click", () => {
        if (body.classList.contains("dark")) {
          body.classList.remove("dark");
          body.classList.add("light");
          toggleBtn.textContent = "‚òÄÔ∏è Light Mode";
          localStorage.setItem("theme", "light");
        } else {
          body.classList.remove("light");
          body.classList.add("dark");
          toggleBtn.textContent = "üåô Dark Mode";
          localStorage.setItem("theme", "dark");
        }
      });
    </script>
  </body>
</html>
